<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../iron-pages/iron-pages.html">
<link rel="import" href="../app-route/app-location.html">
<link rel="import" href="../app-route/app-route.html">
<link rel="import" href="../app-route/app-route-converter.html">

<link rel="import" href="uvalib-newsletter-pages.html">

<dom-module id="uvalib-staff-newsletter">

<template>
  <style is="custom-style">
  :host {
    display: block;
  }
  </style>

  <app-location route="{{_route}}"></app-location>
  <app-route route="{{_route}}" pattern="{{rootPath}}news" tail="{{_newsRoute}}" active="{{_newsActive}}"></app-route>
  <app-route route="{{_route}}" pattern="{{rootPath}}hoo" tail="{{_hooRoute}}" active="{{_hooActive}}"></app-route>
  <app-route route="{{_route}}" pattern="{{rootPath}}" active="{{_initActive}}"></app-route>

  <div id="news" hidden$="{{!_newsActive}}">
    News
    <uvalib-newsletter-pages name="news" articles="{{news}}" path="{{_subPathNews}}" route="{{_newsRoute}}" root-path="{{rootPath}}news"></uvalib-newsletter-pages>
  </div>
  <div id="hoo" hidden$="{{!_hooActive}}">
    Hoo
    <uvalib-newsletter-pages name="hoo" articles="{{trivia}}" path="{{_subPathHoo}}" route="{{_hooRoute}}" root-path="{{rootPath}}hoo"></uvalib-newsletter-pages>
  </div>

</template>

<script>

Polymer({
  is: 'uvalib-staff-newsletter',
  properties: {
    rootPath: {
      type:String,
      value:'/'
    },
    news: Object,
    trivia: Object,
    _initActive: {
      type: Boolean,
      observer: '_init'
    }
  },
  _init: function(){
    if (this._initActive)
      this.set('_route.path', this.rootPath+"news");
  },
  ready: function() {
    this.async(function() {
      // If the path is blank, redirect to /
      if (!this._route.path) {
        this.set('_route.path', this.rootPath);
      }
    });
  }
});

</script>

</dom-module>
